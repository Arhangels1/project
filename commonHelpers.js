import{S as q,N as x,a as L,d as B,b as h}from"./assets/vendor-00f7b9b2.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))v(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&v(d)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function v(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();const k={modules:[x],navigation:{nextEl:".reviews-next-btn",prevEl:".reviews-prev-btn"},direction:"horizontal",keyboard:{enabled:!0,onlyInViewport:!0},breakpoints:{320:{slidesPerView:1},767:{slidesPerView:2,spaceBetween:16},1439:{slidesPerView:4,spaceBetween:16}}};new q(".swiper",k);const i={slideWrapper:document.querySelector(".reviews-swiper-wrapper"),prevBtn:document.querySelector(".reviews-prev-btn"),nextBtn:document.querySelector(".reviews-next-btn")};i.prevBtn.classList.add("reviews-prev-btn-off");let a,u=1;async function V(){const e=await L.get("https://portfolio-js.b.goit.study/api/reviews",{headers:{accept:"application/json"}});console.log(e.data),a=e.data.length,console.log(a),i.slideWrapper.insertAdjacentHTML("afterbegin",C(e.data))}V();function O(e){return`<div class="swiper-slide reviews-swiper-slide">
          <img
            class="reviews-img"
            src="${e.avatar_url}"
            alt="Natalia"
          />
          <div class="reviews-desc">
            <p class="reviews-name">${e.author}</p>
            <p class="reviews-text">${e.review}</p>
          </div>
        </div>`}function C(e){return e.map(O).join("")}i.nextBtn.addEventListener("click",()=>{u++,i.prevBtn.classList.remove("reviews-prev-btn-off"),console.log(u,a),u===a&&(i.nextBtn.classList.add("reviews-prev-btn-off"),console.log("!!!"))});const M="https://portfolio-js.b.goit.study/api";async function P(e){try{return await L.post(`${M}/requests`,e)}catch(n){return n}}const b=document.querySelector(".footer__form"),l=document.querySelector('input[name="comment"]'),p=document.querySelector('input[name="email"]'),o=document.querySelector(".footer__form--is-valid"),g=document.querySelector(".loader"),_=document.querySelector(".backdrop"),c=document.querySelector(".modal"),w=33;let m="";p.addEventListener("input",B($,300));l.addEventListener("input",N);l.addEventListener("blur",T);l.addEventListener("focus",I);b.addEventListener("submit",A);_.addEventListener("click",F);function $(e){R(e),j()}function j(){p.value.length<=0&&(o.textContent="")}function N(e){m=e.target.value}function T(e){e.target.value.length>w&&(e.target.value=e.target.value.substring(0,w)+"...")}function I(e){e.target.value=m}function A(e){e.preventDefault();const n=new FormData(b);g.classList.remove("is-hidden"),P(Object.fromEntries(n)).then(s=>{g.classList.add("is-hidden"),c.innerHTML=y(s.data),f(),h.on(),window.addEventListener("keydown",E)}).catch(s=>{c.innerHTML=y({title:"Error"}),f()}),D()}function E(e){e.code==="Escape"&&S()}function R(e){e.target.checkValidity()?(o.classList.add("footer__form--valid"),o.classList.remove("footer__form--invalid"),o.textContent="Success"):(o.classList.remove("footer__form--valid"),o.classList.add("footer__form--invalid"),o.textContent="Invalid email, try again")}function f(){_.classList.toggle("is-hidden--modal"),c.classList.toggle("animate__bounceInRight"),c.classList.toggle("backdrop__modal__animation")}function D(){p.value="",l.value="",o.textContent="",m=""}function F(e){e.currentTarget===e.target&&S()}function S(){f(),h.off(),window.removeEventListener("keydown",E)}function y({title:e,message:n}){return`<div class="backdrop__modal__content">
        <h4>${e}</h4>
        ${n?`<p>${n}</p>`:""}
      </div>`}
//# sourceMappingURL=commonHelpers.js.map
